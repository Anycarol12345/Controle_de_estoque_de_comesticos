{% extends "base.html" %}

{% block title %}Alertas - Integra+ Estoque{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold mb-6">Alertas do Sistema</h1>

<!-- Estoque Baixo -->
<div class="bg-gray-800 rounded-lg p-6 border border-gray-700 mb-6">
    <h2 class="text-xl font-bold mb-4 flex items-center">
        <span class="w-3 h-3 bg-red-500 rounded-full mr-3"></span>
        Produtos com Estoque Baixo
    </h2>
    <div class="space-y-3">
        {% for produto in estoque_baixo %}
        <div class="flex justify-between items-center p-4 bg-gray-700 rounded border-l-4 border-red-500">
            <div>
                <p class="font-medium">{{ produto.nome }}</p>
                <p class="text-sm text-gray-400">{{ produto.marca.nome }} - SKU: {{ produto.sku }}</p>
            </div>
            <div class="text-right">
                <p class="text-red-400 font-bold text-lg">{{ produto.quantidade_estoque }} un</p>
                <p class="text-xs text-gray-400">Mínimo: {{ produto.estoque_minimo }} un</p>
            </div>
        </div>
        {% endfor %}
        {% if not estoque_baixo %}
        <p class="text-gray-400 text-center py-4">Nenhum produto com estoque baixo</p>
        {% endif %}
    </div>
</div>

<!-- Próximos ao Vencimento -->
<div class="bg-gray-800 rounded-lg p-6 border border-gray-700 mb-6">
    <h2 class="text-xl font-bold mb-4 flex items-center">
        <span class="w-3 h-3 bg-yellow-500 rounded-full mr-3"></span>
        Produtos Próximos ao Vencimento (30 dias)
    </h2>
    <div class="space-y-3">
        {% for mov in proximos_vencimento %}
        <div class="flex justify-between items-center p-4 bg-gray-700 rounded border-l-4 border-yellow-500">
            <div>
                <p class="font-medium">{{ mov.produto.nome }}</p>
                <p class="text-sm text-gray-400">Lote: {{ mov.lote or 'N/A' }}</p>
            </div>
            <div class="text-right">
                <p class="text-yellow-400 font-bold">{{ mov.validade.strftime('%d/%m/%Y') }}</p>
                <p class="text-xs text-gray-400">{{ mov.quantidade }} unidades</p>
            </div>
        </div>
        {% endfor %}
        {% if not proximos_vencimento %}
        <p class="text-gray-400 text-center py-4">Nenhum produto próximo ao vencimento</p>
        {% endif %}
    </div>
</div>

<!-- Sem Movimentação -->
<div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
    <h2 class="text-xl font-bold mb-4 flex items-center">
        <span class="w-3 h-3 bg-orange-500 rounded-full mr-3"></span>
        Produtos Sem Movimentação (90 dias)
    </h2>
    <div class="space-y-3">
        {% for produto in produtos_sem_mov %}
        <div class="flex justify-between items-center p-4 bg-gray-700 rounded border-l-4 border-orange-500">
            <div>
                <p class="font-medium">{{ produto.nome }}</p>
                <p class="text-sm text-gray-400">{{ produto.marca.nome }} - SKU: {{ produto.sku }}</p>
            </div>
            <div class="text-right">
                <p class="text-orange-400 font-bold">{{ produto.quantidade_estoque }} un</p>
                <p class="text-xs text-gray-400">Parado em estoque</p>
            </div>
        </div>
        {% endfor %}
        {% if not produtos_sem_mov %}
        <p class="text-gray-400 text-center py-4">Todos os produtos têm movimentação recente</p>
        {% endif %}
    </div>
</div>
{% endblock %}
