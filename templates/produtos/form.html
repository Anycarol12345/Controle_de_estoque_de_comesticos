{% extends "base.html" %}

{% block title %}{% if produto %}Editar{% else %}Novo{% endif %} Produto - Integra+ Estoque{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto space-y-6 mb-20 md:mb-0">
    <div>
        <h1 class="text-3xl font-bold">{% if produto %}Editar{% else %}Novo{% endif %} Produto</h1>
        <p class="text-muted-foreground">Preencha as informações do produto</p>
    </div>

    <form method="post" class="space-y-6">
         Informações Básicas 
        <div class="bg-card border border-border rounded-lg p-6 space-y-4">
            <h2 class="text-xl font-semibold">Informações Básicas</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium mb-2">Nome do Produto</label>
                    <input type="text" name="nome" required class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">SKU</label>
                    <input type="text" name="sku" required class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Tipo de Produto</label>
                    <select name="tipo_produto" id="tipo_produto" required class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                        <option value="perfume">Perfume/Colônia</option>
                        <option value="creme">Creme</option>
                        <option value="maquiagem">Maquiagem</option>
                        <option value="outro">Outro</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Marca</label>
                    <select name="marca_id" required class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                        {% for marca in marcas %}
                        <option value="{{ marca.id }}">{{ marca.nome }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Categoria</label>
                    <input type="text" name="categoria" class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Linha</label>
                    <input type="text" name="linha" class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
            </div>
        </div>

         Preços e Estoque 
        <div class="bg-card border border-border rounded-lg p-6 space-y-4">
            <h2 class="text-xl font-semibold">Preços e Estoque</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label class="block text-sm font-medium mb-2">Preço de Custo</label>
                    <input type="number" step="0.01" name="preco_custo" required class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Preço de Venda</label>
                    <input type="number" step="0.01" name="preco_venda" required class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Estoque Mínimo</label>
                    <input type="number" name="estoque_minimo" value="5" class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
            </div>
        </div>

         Campos Específicos para Perfumes 
        <div id="campos_perfume" class="bg-card border border-border rounded-lg p-6 space-y-4 hidden">
            <h2 class="text-xl font-semibold">Informações de Perfume/Colônia</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label class="block text-sm font-medium mb-2">Concentração</label>
                    <input type="text" name="concentracao" placeholder="Ex: Eau de Parfum" class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Subfamília</label>
                    <input type="text" name="subfamilia" placeholder="Ex: Floral, Amadeirado" class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Ocasião</label>
                    <input type="text" name="ocasiao" placeholder="Ex: Dia, Noite" class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
            </div>
        </div>

         Campos Específicos para Cremes 
        <div id="campos_creme" class="bg-card border border-border rounded-lg p-6 space-y-4 hidden">
            <h2 class="text-xl font-semibold">Informações de Creme</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium mb-2">Tipo de Pele</label>
                    <input type="text" name="tipo_pele" placeholder="Ex: Seca, Oleosa, Mista" class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Ação/Resultado</label>
                    <input type="text" name="acao_resultado" placeholder="Ex: Hidratação, Anti-idade" class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
            </div>
        </div>

         Campos Específicos para Maquiagens 
        <div id="campos_maquiagem" class="bg-card border border-border rounded-lg p-6 space-y-4 hidden">
            <h2 class="text-xl font-semibold">Informações de Maquiagem</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium mb-2">Textura</label>
                    <input type="text" name="textura" placeholder="Ex: Cremosa, Matte" class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Cobertura</label>
                    <input type="text" name="cobertura" placeholder="Ex: Leve, Média, Alta" class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Fundo de Cor</label>
                    <input type="text" name="fundo_cor" placeholder="Ex: Quente, Frio, Neutro" class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Tonalidade</label>
                    <input type="text" name="tonalidade" placeholder="Ex: Claro, Médio, Escuro" class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
            </div>
        </div>

         Campos Comuns 
        <div class="bg-card border border-border rounded-lg p-6 space-y-4">
            <h2 class="text-xl font-semibold">Informações Adicionais</h2>
            
            <div>
                <label class="block text-sm font-medium mb-2">Propriedades</label>
                <textarea name="propriedades" rows="2" placeholder="Ex: Hipoalergênico, Vegano, Dermatologicamente testado" class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary"></textarea>
            </div>
            
            <div>
                <label class="block text-sm font-medium mb-2">Detalhes</label>
                <textarea name="detalhes" rows="3" class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary"></textarea>
            </div>
            
            <div>
                <label class="block text-sm font-medium mb-2">Ingredientes</label>
                <textarea name="ingredientes" rows="3" class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary"></textarea>
            </div>
            
            <div>
                <label class="block text-sm font-medium mb-2">Como Usar</label>
                <textarea name="como_usar" rows="3" class="w-full bg-secondary border border-border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary"></textarea>
            </div>
        </div>

         Botões 
        <div class="flex gap-4">
            <button type="submit" class="flex-1 bg-primary text-primary-foreground px-6 py-3 rounded-lg font-medium hover:bg-primary/90 transition-colors">
                Salvar Produto
            </button>
            <a href="/produtos" class="px-6 py-3 bg-secondary rounded-lg font-medium hover:bg-secondary/80 transition-colors">
                Cancelar
            </a>
        </div>
    </form>
</div>

<script>
    // Mostrar/ocultar campos específicos baseado no tipo de produto
    const tipoProduto = document.getElementById('tipo_produto');
    const camposPerfume = document.getElementById('campos_perfume');
    const camposCreme = document.getElementById('campos_creme');
    const camposMaquiagem = document.getElementById('campos_maquiagem');
    
    tipoProduto.addEventListener('change', function() {
        camposPerfume.classList.add('hidden');
        camposCreme.classList.add('hidden');
        camposMaquiagem.classList.add('hidden');
        
        if (this.value === 'perfume') {
            camposPerfume.classList.remove('hidden');
        } else if (this.value === 'creme') {
            camposCreme.classList.remove('hidden');
        } else if (this.value === 'maquiagem') {
            camposMaquiagem.classList.remove('hidden');
        }
    });
    
    // Trigger inicial
    tipoProduto.dispatchEvent(new Event('change'));
</script>
{% endblock %}
