{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\nlet MovimentacoesComponent = class MovimentacoesComponent {\n  constructor(apiService) {\n    this.apiService = apiService;\n    this.abaAtiva = \"entrada\";\n    this.produtos = [];\n    this.movimentacoes = [];\n    this.novaMovimentacao = {\n      produto_id: 0,\n      tipo: \"entrada\",\n      quantidade: 0,\n      observacao: \"\",\n      lote: \"\",\n      validade: \"\"\n    };\n  }\n  ngOnInit() {\n    this.carregarDados();\n  }\n  carregarDados() {\n    this.apiService.getProdutos().subscribe({\n      next: data => this.produtos = data,\n      error: err => console.error(\"Erro ao carregar produtos:\", err)\n    });\n    this.apiService.getMovimentacoes().subscribe({\n      next: data => this.movimentacoes = data,\n      error: err => console.error(\"Erro ao carregar movimentações:\", err)\n    });\n  }\n  mudarAba(aba) {\n    this.abaAtiva = aba;\n    this.resetarFormulario();\n  }\n  resetarFormulario() {\n    this.novaMovimentacao = {\n      produto_id: 0,\n      tipo: this.abaAtiva === \"entrada\" ? \"entrada\" : \"saida\",\n      quantidade: 0,\n      observacao: \"\",\n      lote: \"\",\n      validade: \"\"\n    };\n  }\n  registrarMovimentacao() {\n    if (this.novaMovimentacao.produto_id === 0 || this.novaMovimentacao.quantidade <= 0) {\n      alert(\"Preencha todos os campos obrigatórios\");\n      return;\n    }\n    const produto = this.produtos.find(p => p.id === this.novaMovimentacao.produto_id);\n    if (this.abaAtiva === \"saida\" && produto && this.novaMovimentacao.quantidade > produto.quantidade_estoque) {\n      alert(\"Quantidade indisponível em estoque\");\n      return;\n    }\n    this.apiService.criarMovimentacao(this.novaMovimentacao).subscribe({\n      next: () => {\n        alert(\"Movimentação registrada com sucesso!\");\n        this.carregarDados();\n        this.resetarFormulario();\n      },\n      error: err => console.error(\"Erro ao registrar movimentação:\", err)\n    });\n  }\n  getProdutoSelecionado() {\n    return this.produtos.find(p => p.id === this.novaMovimentacao.produto_id);\n  }\n  formatarData(data) {\n    if (!data) return \"-\";\n    return new Date(data).toLocaleDateString(\"pt-BR\");\n  }\n};\nMovimentacoesComponent = __decorate([Component({\n  selector: \"app-movimentacoes\",\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: \"./movimentacoes.component.html\",\n  styleUrls: [\"./movimentacoes.component.css\"]\n})], MovimentacoesComponent);\nexport { MovimentacoesComponent };","map":{"version":3,"names":["Component","CommonModule","FormsModule","MovimentacoesComponent","constructor","apiService","abaAtiva","produtos","movimentacoes","novaMovimentacao","produto_id","tipo","quantidade","observacao","lote","validade","ngOnInit","carregarDados","getProdutos","subscribe","next","data","error","err","console","getMovimentacoes","mudarAba","aba","resetarFormulario","registrarMovimentacao","alert","produto","find","p","id","quantidade_estoque","criarMovimentacao","getProdutoSelecionado","formatarData","Date","toLocaleDateString","__decorate","selector","standalone","imports","templateUrl","styleUrls"],"sources":["C:\\Users\\ANYCA\\Controle_de_estoque_de_comesticos-2\\angular-app\\src\\app\\pages\\movimentacoes\\movimentacoes.component.ts"],"sourcesContent":["import { Component, type OnInit } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { FormsModule } from \"@angular/forms\";\r\nimport type {\r\n  ApiService,\r\n  Movimentacao,\r\n  Produto,\r\n} from \"../../service/api.service\";\r\n\r\n@Component({\r\n  selector: \"app-movimentacoes\",\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule],\r\n  templateUrl: \"./movimentacoes.component.html\",\r\n  styleUrls: [\"./movimentacoes.component.css\"],\r\n})\r\nexport class MovimentacoesComponent implements OnInit {\r\n  abaAtiva: \"entrada\" | \"saida\" | \"historico\" = \"entrada\";\r\n  produtos: Produto[] = [];\r\n  movimentacoes: Movimentacao[] = [];\r\n\r\n  novaMovimentacao: Movimentacao = {\r\n    produto_id: 0,\r\n    tipo: \"entrada\",\r\n    quantidade: 0,\r\n    observacao: \"\",\r\n    lote: \"\",\r\n    validade: \"\",\r\n  };\r\n\r\n  constructor(private apiService: ApiService) {}\r\n\r\n  ngOnInit() {\r\n    this.carregarDados();\r\n  }\r\n\r\n  carregarDados() {\r\n    this.apiService.getProdutos().subscribe({\r\n      next: (data: Produto[]) => (this.produtos = data),\r\n      error: (err: unknown) => console.error(\"Erro ao carregar produtos:\", err),\r\n    });\r\n\r\n    this.apiService.getMovimentacoes().subscribe({\r\n      next: (data: Movimentacao[]) => (this.movimentacoes = data),\r\n      error: (err: unknown) =>\r\n        console.error(\"Erro ao carregar movimentações:\", err),\r\n    });\r\n  }\r\n\r\n  mudarAba(aba: \"entrada\" | \"saida\" | \"historico\") {\r\n    this.abaAtiva = aba;\r\n    this.resetarFormulario();\r\n  }\r\n\r\n  resetarFormulario() {\r\n    this.novaMovimentacao = {\r\n      produto_id: 0,\r\n      tipo: this.abaAtiva === \"entrada\" ? \"entrada\" : \"saida\",\r\n      quantidade: 0,\r\n      observacao: \"\",\r\n      lote: \"\",\r\n      validade: \"\",\r\n    };\r\n  }\r\n\r\n  registrarMovimentacao() {\r\n    if (\r\n      this.novaMovimentacao.produto_id === 0 ||\r\n      this.novaMovimentacao.quantidade <= 0\r\n    ) {\r\n      alert(\"Preencha todos os campos obrigatórios\");\r\n      return;\r\n    }\r\n\r\n    const produto = this.produtos.find(\r\n      (p) => p.id === this.novaMovimentacao.produto_id\r\n    );\r\n    if (\r\n      this.abaAtiva === \"saida\" &&\r\n      produto &&\r\n      this.novaMovimentacao.quantidade > produto.quantidade_estoque\r\n    ) {\r\n      alert(\"Quantidade indisponível em estoque\");\r\n      return;\r\n    }\r\n\r\n    this.apiService.criarMovimentacao(this.novaMovimentacao).subscribe({\r\n      next: () => {\r\n        alert(\"Movimentação registrada com sucesso!\");\r\n        this.carregarDados();\r\n        this.resetarFormulario();\r\n      },\r\n      error: (err: unknown) =>\r\n        console.error(\"Erro ao registrar movimentação:\", err),\r\n    });\r\n  }\r\n\r\n  getProdutoSelecionado(): Produto | undefined {\r\n    return this.produtos.find((p) => p.id === this.novaMovimentacao.produto_id);\r\n  }\r\n\r\n  formatarData(data: string | undefined): string {\r\n    if (!data) return \"-\";\r\n    return new Date(data).toLocaleDateString(\"pt-BR\");\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}